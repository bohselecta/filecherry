import { ResolveOnce } from "../resolve-once.js";
const once = new ResolveOnce();
export class BrowserEnvActions {
    static new(opts) {
        return once.once(() => new BrowserEnvActions(opts));
    }
    constructor(opts) {
        this.env = new Map();
        this.opts = opts;
    }
    get(key) {
        return this.env.get(key);
    }
    set(key, value) {
        if (value) {
            this.env.set(key, value);
        }
    }
    delete(key) {
        this.env.delete(key);
    }
    keys() {
        return Array.from(this.env.keys());
    }
    active() {
        return true;
    }
    register(env) {
        const sym = Symbol.for(this.opts.symbol || "CP_ENV");
        const browser = globalThis;
        browser[sym] = env;
        return env;
    }
}
//# sourceMappingURL=web-env-actions.js.map