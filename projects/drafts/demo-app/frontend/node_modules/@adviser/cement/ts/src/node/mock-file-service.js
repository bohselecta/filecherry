import { NodeFileService } from "./node-file-service.js";
export class MockFileService extends NodeFileService {
    constructor() {
        super(...arguments);
        this.files = {};
    }
    create(fname) {
        let oName = fname;
        if (!this.isAbsolute(fname)) {
            oName = this.abs(fname);
        }
        const fc = {
            name: oName,
            content: "",
        };
        this.files[oName] = fc;
        this.files[fname] = fc;
        const decoder = new TextDecoder();
        return Promise.resolve({
            name: oName,
            stream: new WritableStream({
                write(chunk) {
                    fc.content = fc.content + decoder.decode(chunk);
                },
                close() {
                },
                abort() {
                    throw new Error("not implemented");
                },
            }),
        });
    }
}
//# sourceMappingURL=mock-file-service.js.map